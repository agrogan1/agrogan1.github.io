{
  "hash": "bc525e8b44bf80597508bf673f218ab9",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Can Stata Make A Beautiful Graph?\"\nauthor: \"Andy Grogan-Kaylor\" \ndate: \"2025-1-29\"\ncategories: [stats, dataviz, Stata]\n---\n\n\n\n# Introduction ðŸŒ²\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\nThere is sometimes a *debate*--shall we say--about whether Stata can make beautiful graphs, particularly in comparison to using `ggplot` in R. Below, I try to use as many of Stata's options as I can to make a beautiful graph. I believe that this Stata graph comes close to being as beautiful of a graph as would be made by `ggplot` (and perhaps the syntax is a little more intuitive).\n\nI use green and gold since they are common colors for forestry and park signage.\n\n# Data Source ðŸŒ²\n\nThe data used in this example are derived from the R package *Functions and Datasets for \"Forest Analytics with R\"*.\n\nAccording to the documentation, the source of these data are: \"von Guttenbergâ€™s Norway spruce (Picea abies [L.] Karst) tree measurement data.\"\n\n![Old Tjikko, a 9,550 Year Old Norway Spruce in Sweden](Old-Tjikko-Small.jpg)\n\nThe documentation goes on to further note that:\n\n> \"The data are measures from 107 trees. The trees were selected as being of average size from healthy and well stocked stands in the Alps.\"\n\n\n\n::: {.cell collectcode='true'}\n\n```{.stata .cell-code}\nuse \"https://github.com/agrogan1/multilevel/raw/master/mlm-R2-gutten/gutten.dta\", clear\n\n```\n:::\n\n\n\n# A Simple Graph ðŸŒ²\n\nThe default graphing scheme in Stata 18 is much improved over previous versions, and the below graph may be very good for many purposes.\n\n\n\n::: {.cell}\n\n```{.stata .cell-code}\nuse gutten.dta\n\ntwoway (scatter height age_base) (mspline height age_base)\n\t\ngraph export gutten0.svg, width(2000) replace\n\ngraph export gutten0.png, width(2000) replace\n\n```\n:::\n\n\n\n![A Simple Graph of the Gutten Trees](gutten0.svg){width=75%}\n\n# A Beautiful Graph ðŸŒ²\n\nBelow please find an *admittedly complicated* graph command. Note, however, that the graph builds upon basic ideas that we want a `twoway` graph, with a `scatter`plot and a `mspline` (median spline) smoother. Everything else is just an *option* to improve the appearance of the graph.\n\nI make extensive use of the `///` notation which allows me to spread the graph along multiple lines.\n\n\n\n::: {.cell}\n\n```{.stata .cell-code}\nuse gutten.dta\n\ntwoway /// two way graph\n(scatter height age_base, /// scatterplot\nmcolor(dkgreen%25) msymbol(circle) msize(large)) /// dark green transparent markers\n(mspline height age_base, /// median spline \nlcolor(gold) lwidth(thick)), /// gold line\ntitle(\"Tree Height by Tree Age\") /// title\nxtitle(\"Tree Age\") /// title for x axis\nytitle(\"Tree Height\") /// title for y axis\ncaption(\"Gutten Tree Data\") /// caption\nlegend(order(1 \"trees\" 2 \"median spline\") position(6) rows(1)) /// better labels and format for legend\naspectratio(1) // better aspect ratio\n\ngraph export gutten.png, width(2000) replace\n\t\ngraph export gutten.svg, width(2000) replace\n\n```\n:::\n\n\n\n![A Beautiful? Graph of the Gutten Trees](gutten.svg){width=75%}\n\n\t\n\t\n\t\n\t\n\n\t\n\t\n\t\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}