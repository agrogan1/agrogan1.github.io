{
  "hash": "b7a9c3708b55400f05985a472b7e2007",
  "result": {
    "markdown": "---\ntitle: 'Visualizing Disparities in a Continuous Risk Factor or Outcome'\nsubtitle: \"Telling Stories With Data\"\nauthor: \"Andy Grogan-Kaylor\"\ndate: \"2023-11-8\"\ncategories: [stats, dataviz]\n---\n\n\n# Background\n\nIn this post, I am trying to think through some best practices in showing disparities in a *continuous risk factor* or *continuous outcome*, like *levels of depression* or *levels of poverty*.\n\n> I am using the graphing library `ggplot`. As I often do, I am going to show the code. The code can be useful, especially if you are trying to replicate some of these graphs.  \n\n> However, the discussion is intended to be more conceptual, and you do not need to understand the code to follow the discussion. Indeed, the discussion is intended to be applicable to a wide variety of data visualization tools, including those that do not rely on coding.\n\nI'm going to start by imagining that we have different groups of people.\n\n\n::: {.cell}\n::: {.cell-output-display}\n-----------------------------\n Group A   Group B   Group C \n--------- --------- ---------\n   30        44        26    \n-----------------------------\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n\nWe're going to set up our graphing commands, which requires using some code.\n\n\n::: {.cell}\n\n:::\n\n\n# Grammar of Graphics\n\nLet's think a little bit about a *grammar of graphics*:  What are we going to graph, and how might we wish to represent those quantities on the graph?\n\nIn this example, we are graphing *group* and *risk*.  In this example, I am going to use the *x axis* for the groups, and the *y axis* for risk.\n\nAnd then I'm going to think about how I draw the information, which `ggplot` the graphing library that I am using, calls *geometries.* To start with, I'm going to use perhaps the most intuitive, or at least the most common, geometry of *bars.*\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Two Philosophies](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\nHere, right away, we are presented with two competing philosophies of the *grammar of graphics*. A *minimalist* philosophy, represented on the left hand side, would say that we shouldn't add extra detail to the graph unless it adds extra information.\n\nSo, this philosophy would say that, as we outlined above, *group* goes on the x axis and *risk* goes on the y axis. We wouldn't add extra detail, like *color* to the graph because we've already encoded both *group* and *risk*.\n\nAn alternative philosophy, represented on the right hand side, might say that for *visual interest* we can add extra detail, like *color* even if it doesn't necessarily add extra information to the graph.\n\n> In this document, I'm going err on the side of making my graphs more visually interesting, and hopefully more informative, although I certainly understand the *minimalist* philosophy.\n\n# A Grammatical Statement\n\nIn the graphs below, *group* will go on the x axis.  *Risk* will go on the y axis.  In drawing this information in various ways--employing various geometries--I am going use colors (the *Viridis* color palette) for fill and color. \n\nThese decisions are echoed in the (admittedly complicated) `ggplot` code below which sets up the graphs to follow.  Again, however, it's not necessary to follow the code to follow the discussion.\n\n\n::: {.cell}\n\n:::\n\n\n# Examples\n\nNow that I've thought through the grammar of graphics, I can try different geometries, and think about how well they tell the story that I want to tell.\n\n> While `ggplot` code is provided, you can ignore the code if you like.\n\n## Bar Graph of Mean Values\n\nAs noted above, a bar graph might be the most intuitive, or at least the most common approach. Note that because the bars are the *mean* of risk scores for different groups, that we have to make this clear in the code.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n## Points at Mean Values\n\n### Vertical\n\nInstead of bars indicating mean risk, we could use points at the mean risk value for each group. \n\n\n::: {.cell}\n::: {.cell-output-display}\n![Points at Mean Values](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n### Horizontal\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Horizontal Points at Mean Values](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n## Points at Mean Values Connected by Line\n\nPerhaps we connect the points with a line. Connecting the points with a line in this way may be confusing, as it may imply some kind of trend that we do not wish to imply.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Points at Mean Values Connected by Line](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n## \"Lollipop\" Chart\n\n### Vertical\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Lollipop Chart](index_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n### Horizontal\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Horizontal Lollipop Chart](index_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n\n## Points\n\nThere are various geometries that make use of points to show the full range of the data.\n\nI think that bars may be the best if we wish to focus on differences in group *averages*.  However, there is something very intuitive about graphs where each individual person is represented by an individual point.\n\nAdditionally, points give us a better idea of the exact nature of how risk *is distributed*, and the highest and lowest values of risk for each group.\n\n### Simple Points\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Points](index_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n### Jittered Points\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Jittered Points](index_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n### Beeswarm\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Beeswarm](index_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\nPersonally, I like the *jittered points* geometry, because I believe that it gives a clearer illustration of each individual score, but that may be a matter of personal preference.\n\n# Alternative Geometries\n\nThere are some alternative, less commonly employed geometries. I've seen boxplots a lot in statistics textbooks, but not so much elswhere.  Personally, I find boxplots to be less intuitive.\n\n## Boxplot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Boxplot](index_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\n## Violin Plot\n\nAn even more rarely used geometry is the *violin plot*. It has the advantage of being visually striking, but seems to be less intuitively interpretable.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Violin Plot](index_files/figure-html/unnamed-chunk-16-1.png){fig-pos='!H' width=672}\n:::\n:::\n\n\n# Thinking More About Color\n\nAbove, we added color to the graph simply to add visual interest. We may wish to manually tweak the colors in a different way, to emphasize the level of risk faced by a *particular group* or *groups*.\n\nThis of course requires slightly different code to tweak the colors.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n\n# Thinking More About Titles and Labels\n\nIn addition to thinking about manually specifying colors to tell a story that is more clear, we may also wish to think about the titles. \n\nWe may wish to modify the title to be less studiously neutral, and to encapsulate the *key takeway* that we wish our audience to get.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n\n# Add A Big Number\n\nWe can add a big number as a data label and for emphasis. This requires more complicated code so that we can generate the labels.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n\n\n# Rotate The Bar Chart\n\nLastly, we can think about rotating the bar chart, increasing the size of the labels, and removing the legend, to improve readability.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n\n# Conclusion\n\nGraphing disparities in risk, whether using a code based graphing program like `ggplot` or a more *drag and drop* program requires careful decision making.\n\nWe need to think initially about a *grammar of graphics* and how we are going to encode our data. We need to think about whether we have a *minimalist* philosophy of *grammar of graphics* or one that focuses more on *visual interest*. \n\nWe then need to try out various *geometries* to see which geometries make our stories the most clear.\n\nWe should consider devoting some attention to manual manipulation of choice of color. Making our titles and labels more clear may also help us to better tell our story.\n\n\n\n\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}